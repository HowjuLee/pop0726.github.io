<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Untitled Document</title>
<meta http-equiv="Content-Type" content="text/html; charset="utf-8"">
<link href="../../../css/weiji.css" rel="stylesheet" type="text/css">
<link href="../../../css/weiji.css" rel="stylesheet" type="text/css">
</head>

<body class="bg">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td height="64" class="pt9">　　OCW2用于设置循环优先方式以及特殊循环优先方式的中断优先级。还用来选择并实现一般中断结束方式和特殊中断结束方式。<br>
      　　D7：R为1，表示循环优先方式有效。<br>
      　　D6：SL（set level）是级别设定使能位。R和SL位均为1时，选择特殊循环优先方式。<br>
      　　D5：EOI只用在当ICW4未选择AEOI方式的情况下，如果选择了AEOI，则中断自动复位正在服务位和中断请求位，并且不修改优先权，否则，可以通过EOI设置一般结束中断方式或与SL结合起来选择特殊中断结束方式。<br>
      　　D4、D3：OCW2的标识位，D4为0，表示该命令字为操作命令字；D3为0，是OCW2的标志，用来区别OCW3。D7位R为1，表示循环优先方式有效。<br>
      　　D2~D0：SL和D2~D0位的L2、L1、L0结合起来使用，SL为1时L2、L1、L0的编码指定了8个中断请求之一。在特殊循环优先方式下，被指定序号的中断优先级最低。在EOI和SL均为1时，同样需要L2~L1的配合，为特殊中断结束方式指定操作对象，即指定将要对哪一序号中断的正在服务和请求触发器清零。这两个方式下，SL都必须为1。<br>
      　　下面用表格（表3-4 ）对OCW2的使用做一个总结。<br>
      　　　　　　　　　　　　　　　表3-4 OCW2选择的操作方式<br>
      <table border=0 align="center" cellpadding=0 cellspacing=3 class="pt9">
        <tr> 
          <td width=35 valign=top bgcolor="#CCCCCC" align=center ><b>R</b></td>
          <td width=41 align="center" valign=top bgcolor="#CCCCCC" > <strong>SL</strong></td>
          <td width=48 align="center" valign=top bgcolor="#CCCCCC" > <strong>EOI</strong></td>
          <td width=252 valign=top bgcolor="#CCCCCC" align=center ><b>选择操作方式</b></td>
        </tr>
        <tr> 
          <td width=35 valign=top bgcolor="#F2F2F2" align=center >0</td>
          <td width=41 valign=top bgcolor="#F2F2F2" align=center >0</td>
          <td width=48 valign=top bgcolor="#F2F2F2" align=center >1</td>
          <td width=252 valign=top bgcolor="#F2F2F2" > 一般EOI命令</td>
        </tr>
        <tr> 
          <td width=35 valign=top bgcolor="#CCCCCC" align=center >0</td>
          <td width=41 valign=top bgcolor="#CCCCCC" align=center >1</td>
          <td width=48 valign=top bgcolor="#CCCCCC" align=center >1</td>
          <td width=252 valign=top bgcolor="#CCCCCC" > 特殊EOI命令，对L2~L0指定的ISRi复位</td>
        </tr>
        <tr> 
          <td width=35 valign=top bgcolor="#F2F2F2" align=center >1</td>
          <td width=41 valign=top bgcolor="#F2F2F2" align=center >0</td>
          <td width=48 valign=top bgcolor="#F2F2F2" align=center >1</td>
          <td width=252 valign=top bgcolor="#F2F2F2" > 一般EOI命令下的循环优先</td>
        </tr>
        <tr> 
          <td width=35 valign=top bgcolor="#CCCCCC" align=center >1</td>
          <td width=41 valign=top bgcolor="#CCCCCC" align=center >0</td>
          <td width=48 valign=top bgcolor="#CCCCCC" align=center >0</td>
          <td width=252 valign=top bgcolor="#CCCCCC" > 设置自动循环优先</td>
        </tr>
        <tr> 
          <td width=35 valign=top bgcolor="#F2F2F2" align=center >0</td>
          <td width=41 valign=top bgcolor="#F2F2F2" align=center >0</td>
          <td width=48 valign=top bgcolor="#F2F2F2" align=center >0</td>
          <td width=252 valign=top bgcolor="#F2F2F2" > 清除自动循环优先</td>
        </tr>
        <tr> 
          <td width=35 valign=top bgcolor="#CCCCCC" align=center >1</td>
          <td width=41 valign=top bgcolor="#CCCCCC" align=center >1</td>
          <td width=48 valign=top bgcolor="#CCCCCC" align=center >1</td>
          <td width=252 valign=top bgcolor="#CCCCCC" > EOI命令后，按L2~L0指定级别循环优先</td>
        </tr>
        <tr> 
          <td width=35 valign=top bgcolor="#F2F2F2" align=center >1</td>
          <td width=41 valign=top bgcolor="#F2F2F2" align=center >1</td>
          <td width=48 valign=top bgcolor="#F2F2F2" align=center >0</td>
          <td width=252 valign=top bgcolor="#F2F2F2" > 特殊循环优先方式中设置优先级</td>
        </tr>
        <tr> 
          <td width=35 valign=top bgcolor="#CCCCCC" align=center >1</td>
          <td width=41 valign=top bgcolor="#CCCCCC" align=center >0</td>
          <td width=48 valign=top bgcolor="#CCCCCC" align=center >1</td>
          <td width=252 valign=top bgcolor="#CCCCCC" > 无操作</td>
        </tr>
      </table></td>
  </tr>
</table>
</body>
</html>
