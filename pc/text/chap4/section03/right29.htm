<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Untitled Document</title>
<meta http-equiv="Content-Type" content="text/html; charset="utf-8"">
<link href="../../../css/weiji.css" rel="stylesheet" type="text/css">
<link href="../../../css/weiji.css" rel="stylesheet" type="text/css">
</head>

<body class="bg">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td class="pt9">　　让我们通过一个例子来看。假设8251A工作在具有联络信号的全双工异步模式，数据格式为7位二进制数据位，进行奇校验，1.5个停止位；波特率因子为16。按照前面规定的方式选择字各个数位的含义，那么方式选择字应该为10011010b，也就是9Ah，大家可以对照着含义逐一看看这个方式字的每个数位为什么事0或者1。控制命令需要包括：清除出错标志、令请求发送信号RTS处于有效状态、通知调制解调器和外设CPU将要发送信息。令数据终端准备好信号DTR处于有效状态，通知调制解调器和外设数据终端准备好接收数据。令发送允许位TxEN和接收允许位RxE为1，使发送和接收允许都处于有效状态。这样，按照前面规定的命令字的各个数位的含义，命令字就应该设为00110111b，也就是37h，又假设8251A的命令端口地址为82h，数据端口为80h（我们在讲并行接口的时候提到过，8位接口的芯片在连接8086时，仅使用数据线的低8位，为了让传输信息时，数据出现在低8位数据线上，所以CPU访问各个端口是必须使用偶地址来访问的。为了同时满足8251对端口的规定，在硬件连线上把地址线的A1作为地址的最低位来使用，从CPU的角度看，给出的是两个连续的偶地址，而从接口芯片的角度看，两个偶地址分别向右移了一位，也就是除了2，于是就变成了一个奇地址，一个偶地址，于是就满足了双方的要求）。<br>
      　　初始化程序汇编语言如下：<br>
      　　MOV AL, 9Ah ；设置方式选择字，使8251A处于异步模式；波特率因子为16；<br>
      　　OUT 82h, AL ；数据格式为7个数据位，奇校验，1.5个停止位；<br>
      　　MOV AL, 37H ；设置命令字，置请求发送有效、数据终端准备好信号有效；<br>
      　　OUT 82h, AL ；置发送标志允许、接收允许标志为1。</td>
  </tr>
</table>
</body>
</html>
