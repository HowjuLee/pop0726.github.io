<html><!-- #BeginTemplate "/Templates/r.dwt" -->
<head>
<!-- #BeginEditable "doctitle" --> 
<title>Untitled Document</title>
<!-- #EndEditable -->
<meta http-equiv="Content-Type" content="text/html; charset="utf-8"">
<link rel="stylesheet" href="../../../css/text.css" type="text/css"><STYLE TYPE="text/css">
<!--
BODY {background-image:  url(../../../img/text/bg.jpg);
background-position: bottom;
background-repeat: no-repeat;
background-attachment: fixed;
}
-->
</STYLE>
</head>

<body bgcolor="#FFFFFF" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" background="../../../img/text/bg.jpg" > 

<table width="100%" border="0" cellspacing="0" cellpadding="0" class="pt9-black">
  <tr> 
    <td width="10">&nbsp;</td>
    <td>&nbsp;</td>
    <td width="10">&nbsp;</td>
  </tr>
  <tr>
    <td width="10">&nbsp;</td>
    <td> <!-- #BeginEditable "1" --><span class="biaoti_1">　③用T-SQL语句创建数据库：</span><span class="pt9-black"><br>
      　　用T-SQL语句创建数据库，可以在程序中使用，或在查询分析器中使用。语法格式如下：<br>
      　　　CREATE DATABASE database_name<br>
      　　　　[ ON [PRIMARY]<br>
      　　　　[ &lt;filespec&gt;[,…n] ][, &lt;filegroup&gt;[,…n] ] ][ LOG ON { &lt;filespec&gt; 
      [,…n] } ]<br>
      　　　　[ FOR LOAD �O FOR ATTACH ]</span> 
      <p>　　　&lt;filespec&gt;:: = ( <br>
        　　　　[ NAME = logical_file_name,]<br>
        　　　　FILENAME = 'os_file_name'<br>
        　　　　[,SIZE = size]<br>
        　　　　[,MAXSIZE = {max_size|UNLIMITED}]<br>
        　　　　[,FILEGROWTH = growth_increment]) [,…n]</p>
      <p>　　　&lt;filegroup&gt;:: = <br>
        　　　　FILEGROUP filegroup_name &lt;filespec&gt;[,…n]</p>
      　　<font color="#cc0000">参数说明：<br>
      　・ database_name<br>
      　　新建数据库的名称。数据库名称在服务器中必须唯一，并且符合标识符的规则。database_name最多可以包含128个字符。如果没有指定日志文件的逻辑名，则SQL 
      Server会通过向 database_name追加后缀来生成逻辑名。该操作要求database_name在123个字符之内，以便生成的日志文件逻辑名少于128个字符。<br>
      　・ ON<br>
      　　显式定义用来存储数据库数据部分的数据文件。该关键字后跟以逗号分隔的 &lt;filespec&gt; 项列表，&lt;filespec&gt; 
      项用以定义主文件组的数据文件。主文件组的文件列表后可跟以逗号分隔的 &lt;filegroup&gt; 项列表，&lt;filegroup&gt; 
      项用以定义用户文件组及其文件。<br>
      　・ LOG ON<br>
      　　显式定义用来存储数据库日志的磁盘文件（日志文件）。该关键字后跟以逗号分隔的 &lt;filespec&gt; 项列表，&lt;filespec&gt; 
      项用以定义日志文件。如果没有指定 LOG ON，将自动创建一个日志文件，它使用系统生成的名称，大小为数据库中所有数据文件总大小的25%。<br>
      　・ FOR LOAD<br>
      　　支持该子句是为了与早期版本的 SQL Server 兼容。表示将备份数据直接装入新建的数据库。但从SQL Server7.0开始就可以使用RESTORE语句完成相同的功能。<br>
      　・ FOR ATTACH<br>
      　　指定从现有的一组操作系统文件中建立数据库。必须有指定第一个主文件的 &lt;filespec&gt; 条目。<br>
      　・ PRIMARY<br>
      　　定义数据库的主数据文件。相应&lt;filespec&gt;列表的第一个&lt;filespec&gt;条目成为主数据文件，该文件包含数据库的逻辑起点及其系统表。一个数据库只能有一个主数据文件。如果没有指定PRIMARY，那么CREATE 
      DATABASE语句中列出的第一个文件将成为主数据文件。<br>
      　・ NAME<br>
      　　为由&lt;filespec&gt;定义的文件指定逻辑名称。如果指定了FOR ATTACH，则不需要指定 NAME参数。<br>
      　・ logical_file_name<br>
      　　用来在创建数据库后执行的 Transact-SQL 语句中引用文件的名称。logical_file_name 在数据库中必须唯一，并且符合标识符的规则。<br>
      　・ FILENAME<br>
      　　为 &lt;filespec&gt; 定义的文件指定操作系统文件名。 <br>
      　・ 'os_file_name'<br>
      　　操作系统创建 &lt;filespec&gt; 定义的物理文件时使用的路径名和文件名。os_file_name 中的路径必须指定 SQL Server 
      实例上的目录。os_file_name 不能指定压缩文件系统中的目录。<br>
      　　如果文件在原始分区上创建，则 os_file_name 必须只指定现有原始分区的驱动器字母。每个原始分区上只能创建一个文件。原始分区上的文件不会自动增长；因此，os_file_name 
      指定原始分区时，不需要指定 MAXSIZE 和 FILEGROWTH 参数。<br>
      　・ SIZE<br>
      　　指定&lt;filespec&gt;中定义的文件的大小。如果主文件的&lt;filespec&gt;中没有提供SIZE参数，那么SQL Server将使用model数据库中的主文件大小。如果辅助文件或日志文件的 
      &lt;filespec&gt;中没有指定SIZE参数，则SQL Server将使文件大小为1MB。<br>
      　・ size<br>
      　　&lt;filespec&gt; 中定义的文件的初始大小。可以使用千字节 (KB)、兆字节 (MB)、千兆字节 (GB) 或兆兆字节 (TB) 
      后缀。默认值为 MB。指定一个整数，不要包含小数位。size 的最小值为 512 KB。如果没有指定 size，则默认值为 1 MB。为主文件指定的大小至少应与 
      model 数据库的主文件大小相同。<br>
      　・ MAXSIZE<br>
      　　指定 &lt;filespec&gt; 中定义的文件可以增长到的最大大小。<br>
      　・ max_size<br>
      　　&lt;filespec&gt; 中定义的文件可以增长到的最大大小。可以使用千字节 (KB)、兆字节 (MB)、千兆字节 (GB) 或兆兆字节 
      (TB) 后缀。默认值为 MB。指定一个整数，不要包含小数位。如果没有指定 max_size，那么文件将增长到磁盘变满为止。 <br>
      <br>
      　　说明：在磁盘即将变满时，Windows NT 系统日志会警告 SQL Server 系统管理员。<br>
      　・ UNLIMITED<br>
      　　指定 &lt;filespec&gt; 中定义的文件将增长到磁盘变满为止。<br>
      　・ FILEGROWTH<br>
      　　指定 &lt;filespec&gt; 中定义的文件的增长增量。文件的 FILEGROWTH 设置不能超过 MAXSIZE 设置。<br>
      　・ growth_increment<br>
      　　每次需要新的空间时为文件添加的空间大小。指定一个整数，不要包含小数位。0 值表示不增长。该值可以 MB、KB、GB、TB 或百分比 (%) 
      为单位指定。如果未在数量后面指定 MB、KB 或 %，则默认值为 MB。如果指定 %，则增量大小为发生增长时文件大小的指定百分比。如果没有指定 
      FILEGROWTH，则默认值为1MB；<br>
      </font> 
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td width="35" valign="top"><img src="../../../img/text/liti.gif" width="35" height="36" alt="例题"></td>
          <td class="pt9-black"><font color="#5a5aad">例1，在查询分析器中创建数据库示例如图4-6，其中相应的c:\mssql\data目录一定要事先存在。创建数据库的T-SQL语句如下：　<br>
            　CREATE DATABASE my_libraryON PRIMARY( --数据主文件<br>
            　NAME = my_library_data, --逻辑文件名<br>
            　FILENAME ='c:\mssql\data\my_library.mdf', --数据主文件存储路径，操作系统文件名<br>
            　SIZE = 10 MB, --10 MB的主要数据库文件<br>
            　MAXSIZE = 15 MB, --最大容量15MB<br>
            　FILEGROWTH = 20 % ) --当主数据文件满了，自动增大20%的容量<br>
            　LOG ON( --日志文件<br>
            　NAME = my_library_log, --日志文件逻辑文件名<br>
            　FILENAME ='c:\mssql\data\my_library.ldf', <br>
            　　　　　　　--日志文件存储路径，操作系统文件名<br>
            　SIZE = 3 MB , --3MB的日志文件<br>
            　MAXSIZE = 5 MB , --最大容量5MB <br>
            　FILEGROWTH = 1 MB ) --当日志文件满了，自动增大1MB。</font></td>
        </tr>
      </table>
      <br>
      　　<span class="tubiaoti">图4-6 创建数据库</span><br>
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td align="center"><br>
            <img src="../../../img/text/ch04/a8.gif" width="421" height="270"></td>
        </tr>
      </table>
      <!-- #EndEditable --></td>
    <td width="10">&nbsp;</td>
  </tr>
</table>
</body>
<!-- #EndTemplate --></html>
